webpackJsonp([30],{ctfa:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var __WEBPACK_IMPORTED_MODULE_0_AMap__=__webpack_require__("+aT9"),__WEBPACK_IMPORTED_MODULE_0_AMap___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_AMap__);__webpack_exports__.a={name:"hindex",data:function(){return{navboo:!1,navtext:"分类",start:!1,setime:"",mapcenter:"[117.471564,34.366127]",map:"",workphoto:[]}},mounted:function(){this.$store.state.tfoot=1,this.mylocation()},methods:{myajax:function(){var t=this;$.ajax({type:"get",url:t.service+"/querAllCwork",dataType:"json",data:{cuserId:localStorage.getItem("userid")},success:function(e){t.workphoto=e.data}})},change:function(){this.start=!this.start,this.start?this.havecenter():(plus.geolocation.clearWatch(this.setime),this.setime="")},mylocation:function(){this.map=new __WEBPACK_IMPORTED_MODULE_0_AMap___default.a.Map("map-container",{zoom:25,center:JSON.parse(this.mapcenter)}),this.marker=new __WEBPACK_IMPORTED_MODULE_0_AMap___default.a.Marker({title:"提示"}),this.marker.setMap(this.map)},havecenter:function(){var t=this;t.setime=plus.geolocation.watchPosition(function(e){t.mapcenter="["+e.coords.longitude+","+e.coords.latitude+"]",t.marker.setPosition(JSON.parse(t.mapcenter)),t.map.setCenter(JSON.parse(t.mapcenter)),$.ajax({type:"post",url:t.service+"/insertCworkBytxt",dataType:"json",data:{cuserId:localStorage.getItem("userid"),point:t.mapcenter},success:function(t){}})},function(t){alert("错误信息:"+t.message)},{enableHighAccuracy:!0})},opennew:function(t){this.$router.push({name:t})},toswiper:function(t){this.swiperindex=t,this.swiper.slideTo(t,1e3,!1)},navshow:function(t){this.navboo=!this.navboo,this.navtext=t},upload:function(t){var e=this;e.files=[],e.uploadtarget=t;plus.nativeUI.actionSheet({title:"请选择",cancel:"取消",buttons:[{title:"照相机"},{title:"相册"}]},function(t){switch(t.index){case 1:e.camera();break;case 2:e.album()}})},camera:function(){var t=this;plus.camera.getCamera().captureImage(function(e){plus.io.resolveLocalFileSystemURL(e,function(e){e.name;var a=e.toLocalURL();document.getElementById("img"+t.uploadtarget).setAttribute("src",a),t.upload_img(a)},function(t){alert("读取拍照文件错误："+t.message)})},function(t){alert("失败："+t.message)},{filename:"_doc/camera/",index:1})},album:function(){var t=this;plus.gallery.pick(function(e){document.getElementById("img"+t.uploadtarget).setAttribute("src",e),t.upload_img(e)},function(t){alert("取消选择图片")},{filter:"image"})},upload_img:function(t){t.substr(t.lastIndexOf("/")+1);this.files.push({name:"uploadkey",path:t}),this.start_upload()},start_upload:function start_upload(){var that=this;if(that.files.length<=0)plus.nativeUI.alert("没有添加上传文件！");else{var wt=plus.nativeUI.showWaiting(),task=plus.uploader.createUpload(that.server,{method:"POST"},function(t,status){if(200==status){var responseText=t.responseText,json=eval("("+responseText+")");that.files=json.data,wt.close()}else alert("上传失败："+status),wt.close()});task.addData("uid",that.getUid());for(var i=0;i<that.files.length;i++){var f=that.files[i];task.addFile(f.path,{key:f.name})}task.start()}},getUid:function(){return Math.floor(1e8*Math.random()+1e7).toString()}},computed:{tfoot:function(){return this.$store.state.tfoot},service:function(){return this.$store.state.service}},components:{THead:function(t){return __webpack_require__.e(50).then(function(){var e=[__webpack_require__("AC15")];t.apply(null,e)}.bind(this)).catch(__webpack_require__.oe)},HFoot:function(t){return __webpack_require__.e(54).then(function(){var e=[__webpack_require__("Ki7M")];t.apply(null,e)}.bind(this)).catch(__webpack_require__.oe)},BottomNav:function(t){return __webpack_require__.e(51).then(function(){var e=[__webpack_require__("cBse")];t.apply(null,e)}.bind(this)).catch(__webpack_require__.oe)}}}}).call(__webpack_exports__,__webpack_require__("7t+N"))},sGEQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("ctfa"),s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"windex",attrs:{id:"wrapper"}},[n("t-head"),t._v(" "),n("div",{attrs:{id:"main"}},[n("div",{staticClass:"map"},[n("div",{attrs:{id:"map-container"}}),t._v(" "),n("div",{staticClass:"img-box",on:{click:t.change}},[n("transition",{attrs:{name:"start"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!t.start,expression:"!start"}],attrs:{src:a("bFMn")}})]),t._v(" "),n("transition",{attrs:{name:"start"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:t.start,expression:"start"}],attrs:{src:a("tYCZ")}})])],1),t._v(" "),n("h1",{on:{click:t.change}},[t._v("\n\t\t\t\t\t\t"+t._s(0==t.start?"开始记录":"停止记录")+"\n\t\t\t\t\t")])])]),t._v(" "),n("transition",{attrs:{name:"nav"}},[n("bottom-nav",{directives:[{name:"show",rawName:"v-show",value:t.navboo,expression:"navboo"}],on:{navshow:t.navshow}})],1),t._v(" "),n("h-foot")],1)},staticRenderFns:[]};var i=function(t){a("vG+s")},r=a("VU/8")(n.a,s,!1,i,null,null);e.default=r.exports},"vG+s":function(t,e){}});
//# sourceMappingURL=30.e6f36f14dc6502ee1cb0.js.map