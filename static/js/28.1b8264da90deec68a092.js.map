{"version":3,"sources":["webpack:///./src/components/health/hwork.vue?8702","webpack:///./src/components/health/hwork.vue","webpack:///src/components/health/hwork.vue"],"names":["health_hwork","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","name","directives","rawName","value","expression","on","click","alerttab","_v","staticStyle","position","_l","val","workphoto","length","$event","opennew","cworkId","width","_s","createTime1","cworkTitle","margin-right","src","__webpack_require__","stopPropagation","workphotod","_e","upload","type","placeholder","domProps","input","target","composing","workupload","staticRenderFns","__vue_styles__","ssrContext","Component","normalizeComponent","hwork","__webpack_exports__","data","uploadtarget","server","files","alertboo","mounted","$store","state","tfoot","service","myajax","methods","that","$","ajax","url","dataType","cuserId","localStorage","getItem","success","res","_plusReady","plus","nativeUI","toast","window","document","addEventListener","plusReady","showWaiting","cworkImg","status","_plusReady2","closeWaiting","actionSheet","title","cancel","buttons","e","index","_plusReady3","windexid","$router","push","camera","album","getCamera","captureImage","p","io","resolveLocalFileSystemURL","entry","img_path","toLocalURL","getElementById","setAttribute","upload_img","alert","message","filename","gallery","pick","path","filter","substr","lastIndexOf","start_upload","wt","task","uploader","createUpload","method","t","responseText","json","eval","close","addData","getUid","i","f","addFile","key","start","Math","floor","random","toString","computed","components","THead","resolve","then","__WEBPACK_AMD_REQUIRE_ARRAY__","bind","catch","oe","TFoot"],"mappings":"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","file":"static/js/28.1b8264da90deec68a092.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"workcamera\",attrs:{\"id\":\"warpper\"}},[_c('transition',{attrs:{\"name\":\"alert\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.alertboo),expression:\"alertboo\"}],staticClass:\"alert\",on:{\"click\":_vm.alerttab}},[_c('div',{staticClass:\"alert-inner\"},[_c('div',{staticClass:\"alert-text\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t日期填写不完整\\n\\t\\t\\t\\t\")]),_vm._v(\" \"),_c('div',{staticClass:\"alert-setting\"},[_c('div',{staticClass:\"setting-group\"},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t确定\\n\\t\\t\\t\\t\\t\")])])])])]),_vm._v(\" \"),_c('t-head'),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"relative\"},attrs:{\"id\":\"main\"}},[_c('div',[_c('div',{staticClass:\"box-group\"},[_vm._l((_vm.workphoto),function(val){return (_vm.workphoto.length!=0)?_c('div',{staticClass:\"group\",on:{\"click\":function($event){_vm.opennew('hworkdetail',val.cworkId)}}},[_c('div',{staticClass:\"riqi\"},[_c('div',{staticClass:\"circle width12\"}),_vm._v(\" \"),_c('span',{staticStyle:{\"width\":\"auto\"}},[_vm._v(_vm._s(val.createTime1))])]),_vm._v(\" \"),_c('span',{staticClass:\"text\"},[_vm._v(_vm._s(val.cworkTitle))]),_vm._v(\" \"),_c('img',{staticStyle:{\"margin-right\":\".2rem\"},attrs:{\"src\":require(\"../../../static/shanchu.png\")},on:{\"click\":function($event){$event.stopPropagation();_vm.workphotod(val.cworkId)}}})]):_vm._e()}),_vm._v(\" \"),(_vm.workphoto.length==0)?_c('p',[_vm._v(\"暂无数据\")]):_vm._e()],2)])]),_vm._v(\" \"),_c('footer',[_c('div',{staticClass:\"box-upload\"},[_c('div',{staticClass:\"upload\"},[_c('img',{attrs:{\"src\":require(\"../../../static/upload02.png\"),\"id\":\"img1\"},on:{\"click\":function($event){_vm.upload('1')}}}),_vm._v(\" \"),_c('div',{staticClass:\"shangchuan\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.cworkTitle),expression:\"cworkTitle\"}],staticClass:\"sck\",attrs:{\"type\":\"text\",\"placeholder\":\"请填写标题\"},domProps:{\"value\":(_vm.cworkTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.cworkTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"sctext\",on:{\"click\":_vm.workupload}},[_c('span',[_vm._v(\"上传\")])])])])])]),_vm._v(\" \"),_c('t-foot')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-13735447\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/health/hwork.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-13735447\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./hwork.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./hwork.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./hwork.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-13735447\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./hwork.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/health/hwork.vue\n// module id = null\n// module chunks = ","<template>\r\n\t<div class=\"workcamera\" id=\"warpper\">\r\n\t\t<transition name='alert'>\r\n\t\t\t<div class=\"alert\" v-show=\"alertboo\" @click=\"alerttab\">\r\n\t\t\t\t<div class=\"alert-inner\">\r\n\t\t\t\t\t<div class=\"alert-text\">\r\n\t\t\t\t\t\t日期填写不完整\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"alert-setting\">\r\n\t\t\t\t\t\t<div class=\"setting-group\">\r\n\t\t\t\t\t\t\t确定\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</transition>\r\n\t\t<t-head></t-head>\r\n\t\t<div id=\"main\" style=\"position: relative;\">\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\"box-group\">\r\n\t\t\t\t\t<div class=\"group\" v-for=\"val in workphoto\" @click=\"opennew('hworkdetail',val.cworkId)\" v-if=\"workphoto.length!=0\">\r\n\t\t\t\t\t\t<div class=\"riqi\">\r\n\t\t\t\t\t\t\t<div class=\"circle width12\"></div>\r\n\t\t\t\t\t\t\t<span style=\"width: auto;\">{{val.createTime1}}</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span class=\"text\">{{val.cworkTitle}}</span>\r\n\t\t\t\t\t\t<img src=\"../../../static/shanchu.png\" @click.stop=\"workphotod(val.cworkId)\" style=\"margin-right: .2rem;\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p v-if=\"workphoto.length==0\">暂无数据</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<footer>\r\n\t\t\t<div class=\"box-upload\">\r\n\t\t\t\t<div class=\"upload\">\r\n\t\t\t\t\t<img src=\"../../../static/upload02.png\" id=\"img1\" @click=\"upload('1')\">\r\n\t\t\t\t\t<div class=\"shangchuan\">\r\n\t\t\t\t\t\t<input class=\"sck\" type=\"text\" placeholder=\"请填写标题\" v-model=\"cworkTitle\"></input>\r\n\t\t\t\t\t\t<div class=\"sctext\" @click=\"workupload\"><span>上传</span></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</footer>\r\n\t\t<t-foot></t-foot>\r\n\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: 'hwork',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tuploadtarget: '',\r\n\t\t\t\tserver: 'http://39.107.70.18/Transportation/uploadDriverImage',\r\n\t\t\t\tfiles: [],\r\n\t\t\t\talertboo: false,\r\n\t\t\t\tworkphoto: '',\r\n\t\t\t\tcworkTitle: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$store.state.tfoot = 2\r\n\t\t\tthis.server = this.service + '/uploadworkImage'\r\n\t\t\tthis.myajax()\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tmyajax: function() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: \"get\",\r\n\t\t\t\t\turl: that.service + \"/querAllCwork\",\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcuserId: localStorage.getItem('userid')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tthat.workphoto = res.data\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tworkupload: function() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif(that.cworkTitle == '' || that.files == '') {\r\n\t\t\t\t\tfunction plusReady() {\r\n\t\t\t\t\t\t// 显示自动消失的提示消息\r\n\t\t\t\t\t\tplus.nativeUI.toast(\"请把信息填写完整！\");\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(window.plus) {\r\n\t\t\t\t\t\tplusReady();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdocument.addEventListener(\"plusready\", plusReady, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction plusReady() {\r\n\t\t\t\t\t// 显示自动消失的提示消息\r\n\t\t\t\t\tplus.nativeUI.showWaiting('上传中');\r\n\t\t\t\t}\r\n\t\t\t\tif(window.plus) {\r\n\t\t\t\t\tplusReady();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.addEventListener(\"plusready\", plusReady, false);\r\n\t\t\t\t}\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: \"post\",\r\n\t\t\t\t\turl: that.service + \"/insertByCworkImg\",\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tcuserId: localStorage.getItem('userid'),\r\n\t\t\t\t\t\tcworkTitle: that.cworkTitle,\r\n\t\t\t\t\t\tcworkImg: that.files\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif(res.status == 200) {\r\n\t\t\t\t\t\t\tthat.myajax()\r\n\r\n\t\t\t\t\t\t\tfunction plusReady() {\r\n\t\t\t\t\t\t\t\t// 显示自动消失的提示消息\r\n\t\t\t\t\t\t\t\tplus.nativeUI.closeWaiting();\r\n\t\t\t\t\t\t\t\tthat.cworkTitle = ''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(window.plus) {\r\n\t\t\t\t\t\t\t\tplusReady();\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdocument.addEventListener(\"plusready\", plusReady, false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tworkphotod: function(id) {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tvar btnArray = [{\r\n\t\t\t\t\ttitle: \"删除\"\r\n\t\t\t\t}, ]; //选择按钮  1 2 3\r\n\t\t\t\tplus.nativeUI.actionSheet({\r\n\t\t\t\t\ttitle: \"请选择\",\r\n\t\t\t\t\tcancel: \"取消\",\r\n\t\t\t\t\tbuttons: btnArray\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\tvar index = e.index;\r\n\t\t\t\t\tswitch(index) {\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\ttype: \"post\",\r\n\t\t\t\t\t\t\t\turl: that.service + \"/deleteCorkByCworkId\",\r\n\t\t\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tcworkId: id\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tif(res.status == 200) {\r\n\t\t\t\t\t\t\t\t\t\tfunction plusReady() {\r\n\t\t\t\t\t\t\t\t\t\t\t// 显示自动消失的提示消息\r\n\t\t\t\t\t\t\t\t\t\t\tplus.nativeUI.toast(\"删除完成！\");\r\n\t\t\t\t\t\t\t\t\t\t\tthat.myajax()\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif(window.plus) {\r\n\t\t\t\t\t\t\t\t\t\t\tplusReady();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tdocument.addEventListener(\"plusready\", plusReady, false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tfunction plusReady() {\r\n\t\t\t\t\t\t\t\t\t\t\t// 显示自动消失的提示消息\r\n\t\t\t\t\t\t\t\t\t\t\tplus.nativeUI.toast(\"删除失败!\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif(window.plus) {\r\n\t\t\t\t\t\t\t\t\t\t\tplusReady();\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tdocument.addEventListener(\"plusready\", plusReady, false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\talerttab: function() {\r\n\t\t\t\tthis.alertboo = !this.alertboo\r\n\t\t\t},\r\n\t\t\topennew: function(target, id) {\r\n\t\t\t\tthis.$store.state.windexid = id\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: target\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tupload: function(target) {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tthat.files = []\r\n\t\t\t\tthat.uploadtarget = target\r\n\t\t\t\tvar btnArray = [{\r\n\t\t\t\t\ttitle: \"照相机\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\ttitle: \"相册\"\r\n\t\t\t\t}]; //选择按钮  1 2 3\r\n\t\t\t\tplus.nativeUI.actionSheet({\r\n\t\t\t\t\ttitle: \"请选择\",\r\n\t\t\t\t\tcancel: \"取消\",\r\n\t\t\t\t\tbuttons: btnArray\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\tvar index = e.index;\r\n\t\t\t\t\tswitch(index) {\r\n\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\tthat.camera();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\tthat.album();\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcamera: function() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tvar cmr = plus.camera.getCamera();\r\n\t\t\t\tcmr.captureImage(function(p) {\r\n\t\t\t\t\t//成功\r\n\t\t\t\t\tplus.io.resolveLocalFileSystemURL(p, function(entry) {\r\n\t\t\t\t\t\tvar img_name = entry.name;\r\n\t\t\t\t\t\tvar img_path = entry.toLocalURL();\r\n\t\t\t\t\t\tdocument.getElementById('img' + that.uploadtarget).setAttribute('src', img_path)\r\n\t\t\t\t\t\tthat.upload_img(img_path);\r\n\t\t\t\t\t}, function(e) {\r\n\t\t\t\t\t\talert(\"读取拍照文件错误：\" + e.message);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\talert(\"失败：\" + e.message);\r\n\t\t\t\t}, {\r\n\t\t\t\t\tfilename: '_doc/camera/',\r\n\t\t\t\t\tindex: 1\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\talbum: function() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tplus.gallery.pick(function(path) {\r\n\t\t\t\t\tdocument.getElementById('img' + that.uploadtarget).setAttribute('src', path)\r\n\t\t\t\t\tthat.upload_img(path);\r\n\t\t\t\t}, function(e) {\r\n\t\t\t\t\talert(\"取消选择图片\");\r\n\t\t\t\t}, {\r\n\t\t\t\t\tfilter: \"image\"\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tupload_img: function(p) {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tvar n = p.substr(p.lastIndexOf('/') + 1);\r\n\t\t\t\tthat.files.push({\r\n\t\t\t\t\tname: \"uploadkey\",\r\n\t\t\t\t\tpath: p\r\n\t\t\t\t});\r\n\t\t\t\t//开始上传\r\n\t\t\t\tthat.start_upload();\r\n\t\t\t},\r\n\t\t\tstart_upload: function() {\r\n\t\t\t\tvar that = this\r\n\t\t\t\tif(that.files.length <= 0) {\r\n\t\t\t\t\tplus.nativeUI.alert(\"没有添加上传文件！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//原生的转圈等待框\r\n\t\t\t\tvar wt = plus.nativeUI.showWaiting();\r\n\t\t\t\tvar task = plus.uploader.createUpload(that.server, {\r\n\t\t\t\t\t\tmethod: \"POST\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfunction(t, status) { //上传完成\r\n\t\t\t\t\t\tif(status == 200) {\r\n\t\t\t\t\t\t\t//资源\r\n\t\t\t\t\t\t\tvar responseText = t.responseText;\r\n\t\t\t\t\t\t\t//转换成json\r\n\t\t\t\t\t\t\tvar json = eval('(' + responseText + ')');\r\n\t\t\t\t\t\t\t//上传文件的信息\r\n\t\t\t\t\t\t\tthat.files = json.data;\r\n\t\t\t\t\t\t\twt.close();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\talert(\"上传失败：\" + status);\r\n\t\t\t\t\t\t\t//关闭原生的转圈等待框\r\n\t\t\t\t\t\t\twt.close();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\ttask.addData(\"uid\", that.getUid());\r\n\t\t\t\tfor(var i = 0; i < that.files.length; i++) {\r\n\t\t\t\t\tvar f = that.files[i];\r\n\t\t\t\t\ttask.addFile(f.path, {\r\n\t\t\t\t\t\tkey: f.name\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\ttask.start();\r\n\t\t\t},\r\n\t\t\tgetUid: function() {\r\n\t\t\t\treturn Math.floor(Math.random() * 100000000 + 10000000).toString();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttfoot() {\r\n\t\t\t\treturn this.$store.state.tfoot\r\n\t\t\t},\r\n\t\t\tservice() {\r\n\t\t\t\treturn this.$store.state.service\r\n\t\t\t},\r\n\t\t\twindexid() {\r\n\t\t\t\treturn this.$store.state.windexid\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tTHead: resolve => require(['../tourists/thead'], resolve),\r\n\t\t\tTFoot: resolve => require(['./hfoot'], resolve)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style type=\"text/css\" lang=\"scss\">\r\n\thtml,\r\n\tbody,\r\n\t.warpper {\r\n\t\tpadding: 0px;\r\n\t\tmargin: 0px;\r\n\t\tfont-size: .2rem;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.workcamera {\r\n\t\toverflow: hidden;\r\n\t\tp {\r\n\t\t\ttext-align: center;\r\n\t\t\tline-height: 1rem;\r\n\t\t}\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/health/hwork.vue"],"sourceRoot":""}