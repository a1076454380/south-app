webpackJsonp([28],{"4SQu":function(t,e){},RBeq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("VXC6"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"workcamera",attrs:{id:"warpper"}},[i("transition",{attrs:{name:"alert"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.alertboo,expression:"alertboo"}],staticClass:"alert",on:{click:t.alerttab}},[i("div",{staticClass:"alert-inner"},[i("div",{staticClass:"alert-text"},[t._v("\n\t\t\t\t\t日期填写不完整\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"alert-setting"},[i("div",{staticClass:"setting-group"},[t._v("\n\t\t\t\t\t\t确定\n\t\t\t\t\t")])])])])]),t._v(" "),i("t-head"),t._v(" "),i("div",{staticStyle:{position:"relative"},attrs:{id:"main"}},[i("div",{staticClass:"box-group",staticStyle:{height:"calc(100% - 3rem)","overflow-y":"scroll"}},[t._l(t.list,function(e){return i("div",{staticClass:"group",on:{click:function(a){t.opennew("hworkdetail",e.cworkId)}}},[i("div",{staticClass:"riqi"},[i("div",{staticClass:"circle width12"}),t._v(" "),i("span",{staticStyle:{width:"auto"}},[t._v(t._s(e.createTime1))])]),t._v(" "),i("span",{staticClass:"text"},[t._v(t._s(e.cworkTitle))]),t._v(" "),i("img",{staticStyle:{"margin-right":".2rem"},attrs:{src:a("SQk+")},on:{click:function(a){a.stopPropagation(),t.workphotod(e.cworkId)}}})])}),t._v(" "),t.pageNum<t.workphoto.lastPage?i("div",{staticClass:"more",on:{click:function(e){t.next()}}},[t._v("点击加载更多")]):t._e(),t._v(" "),t.pageNum>t.workphoto.lastPage||t.pageNum==t.workphoto.lastPage?i("div",{staticClass:"more"},[t._v("没有更多啦~")]):t._e(),t._v(" "),0==t.workphoto.length?i("p",[t._v("暂无数据")]):t._e()],2)]),t._v(" "),i("footer",[i("div",{staticClass:"box-upload"},[i("div",{staticClass:"upload"},[i("img",{attrs:{src:a("9z6F"),id:"img1"},on:{click:function(e){t.upload("1")}}}),t._v(" "),i("div",{staticClass:"shangchuan"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.cworkTitle,expression:"cworkTitle"}],staticClass:"sck",attrs:{type:"text",placeholder:"请填写标题"},domProps:{value:t.cworkTitle},on:{input:function(e){e.target.composing||(t.cworkTitle=e.target.value)}}}),t._v(" "),i("div",{staticClass:"sctext",on:{click:t.workupload}},[i("span",[t._v("上传")])])])])])]),t._v(" "),i("t-foot")],1)},staticRenderFns:[]};var o=function(t){a("4SQu")},n=a("VU/8")(i.a,s,!1,o,null,null);e.default=n.exports},VXC6:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){__webpack_exports__.a={name:"hwork",data:function(){return{uploadtarget:"",server:"http://39.107.70.18/Transportation/uploadDriverImage",files:[],alertboo:!1,workphoto:"",cworkTitle:"",pageNum:1,pageSize:10,list:[]}},mounted:function(){this.$store.state.tfoot=2,this.server=this.service+"/uploadworkImage",this.next()},methods:{next:function(){this.pageNum++,this.myajax()},myajax:function(){function t(){plus.nativeUI.showWaiting("数据加载中~")}window.plus?t():document.addEventListener("plusready",t,!1);var e=this;$.ajax({type:"get",url:e.service+"/querAllCwork",dataType:"json",data:{cuserId:localStorage.getItem("userid"),pageNum:e.pageNum,status:0},success:function(t){console.log(t),e.workphoto=t.data;for(var a=0;a<t.data.list.length;a++)e.list.push(t.data.list[a]);for(a=0;a<t.data.list.length;a++)e.list.push(t.data.list[a]);function i(){plus.nativeUI.closeWaiting()}window.plus?i():document.addEventListener("plusready",i,!1)}})},workupload:function(){var t=this;if(""==t.cworkTitle||""==t.files){var e=function(){return plus.nativeUI.toast("请把信息填写完整！"),!1};window.plus?e():document.addEventListener("plusready",e,!1)}function a(){plus.nativeUI.showWaiting("上传中")}window.plus?a():document.addEventListener("plusready",a,!1),$.ajax({type:"post",url:t.service+"/insertByCworkImg",dataType:"json",data:{cuserId:localStorage.getItem("userid"),cworkTitle:t.cworkTitle,cworkImg:t.files},success:function(e){if(200==e.status){var a=function(){plus.nativeUI.closeWaiting(),t.cworkTitle=""};t.myajax(),window.plus?a():document.addEventListener("plusready",a,!1)}}})},workphotod:function(t){var e=this;plus.nativeUI.actionSheet({title:"请选择",cancel:"取消",buttons:[{title:"删除"}]},function(a){switch(a.index){case 1:$.ajax({type:"post",url:e.service+"/deleteCorkByCworkId",dataType:"json",data:{cworkId:t},success:function(t){if(200==t.status){var a=function(){plus.nativeUI.toast("删除完成！"),e.myajax()};window.plus?a():document.addEventListener("plusready",a,!1)}else{var i=function(){plus.nativeUI.toast("删除失败!")};window.plus?i():document.addEventListener("plusready",i,!1)}}})}})},alerttab:function(){this.alertboo=!this.alertboo},opennew:function(t,e){this.$store.state.windexid=e,this.$router.push({name:t})},upload:function(t){var e=this;e.files=[],e.uploadtarget=t;plus.nativeUI.actionSheet({title:"请选择",cancel:"取消",buttons:[{title:"照相机"},{title:"相册"}]},function(t){switch(t.index){case 1:e.camera();break;case 2:e.album()}})},camera:function(){var t=this;plus.camera.getCamera().captureImage(function(e){plus.io.resolveLocalFileSystemURL(e,function(e){e.name;var a=e.toLocalURL();document.getElementById("img"+t.uploadtarget).setAttribute("src",a),t.upload_img(a)},function(t){alert("读取拍照文件错误："+t.message)})},function(t){alert("失败："+t.message)},{filename:"_doc/camera/",index:1})},album:function(){var t=this;plus.gallery.pick(function(e){document.getElementById("img"+t.uploadtarget).setAttribute("src",e),t.upload_img(e)},function(t){alert("取消选择图片")},{filter:"image"})},upload_img:function(t){t.substr(t.lastIndexOf("/")+1);this.files.push({name:"uploadkey",path:t}),this.start_upload()},start_upload:function start_upload(){var that=this;if(that.files.length<=0)plus.nativeUI.alert("没有添加上传文件！");else{var wt=plus.nativeUI.showWaiting(),task=plus.uploader.createUpload(that.server,{method:"POST"},function(t,status){if(200==status){var responseText=t.responseText,json=eval("("+responseText+")");that.files=json.data,wt.close()}else alert("上传失败："+status),wt.close()});task.addData("uid",that.getUid());for(var i=0;i<that.files.length;i++){var f=that.files[i];task.addFile(f.path,{key:f.name})}task.start()}},getUid:function(){return Math.floor(1e8*Math.random()+1e7).toString()}},computed:{tfoot:function(){return this.$store.state.tfoot},service:function(){return this.$store.state.service},windexid:function(){return this.$store.state.windexid}},components:{THead:function(t){return __webpack_require__.e(50).then(function(){var e=[__webpack_require__("AC15")];t.apply(null,e)}.bind(this)).catch(__webpack_require__.oe)},TFoot:function(t){return __webpack_require__.e(54).then(function(){var e=[__webpack_require__("Ki7M")];t.apply(null,e)}.bind(this)).catch(__webpack_require__.oe)}}}}).call(__webpack_exports__,__webpack_require__("7t+N"))}});
//# sourceMappingURL=28.2e03827d2a6d5081fe8a.js.map